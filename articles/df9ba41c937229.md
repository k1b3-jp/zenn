---
title: "ã€WordPressã€‘ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ™‚ã«ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’åŒæ™‚ã«ç™»éŒ²ã™ã‚‹"
emoji: "ğŸ‘»"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["WordPress", "php"]
published: true
---

# ä¸ä»¶
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ã¯WP-Membersã‚’åˆ©ç”¨
- ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²ç”»é¢ã«æ¸¡ã—ãŸãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼`?hoge`ã‚’ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã«ç´ä»˜ã‘ã‚‹

# è§£æ±ºç­–
## ã‚³ãƒ¼ãƒ‰
```php:functions.php
add_action( 'user_register', 'user_cf_set', 10, 1 );
function user_cf_set($user_id) {
  $param = wp_get_referer(); //ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ãƒ¼ã‚’å–å¾—
  update_user_meta($user_id, 'ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰å', $param); //ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚’æ›´æ–°
}
```

ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ç­‰ã§æ¸¡ã›ã‚‹ã‹ã¨æ€ã£ãŸã®ã§ã™ãŒã€ç„¡ç†ã§ã—ãŸã€‚
ãƒ¦ãƒ¼ã‚¶ãƒ¼ç™»éŒ²æ™‚ã«DBã«ç›´æ¥æ›¸ãè¾¼ã¾ã›ã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ğŸ’¦ï¼ˆã‚ã‚“ã©ãã›ï¼ï¼‰

## ãƒã‚¤ãƒ³ãƒˆ
- user_registerãƒ•ãƒƒã‚¯ã‚’åˆ©ç”¨
- wp_get_refererã§URLã‚’å–å¾—ï¼ˆ$GETã§ã¯ä¸å¯ï¼‰
- ã‚«ã‚¹ã‚¿ãƒ ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ã‚‚ã—ãã¯WP-Membersç­‰ã®ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ¸¡ã™

# å‚è€ƒæ–‡çŒ®
https://yyengine.jp/2014/02/23/wp-members-hook/
https://wpdocs.osdn.jp/%E9%96%A2%E6%95%B0%E3%83%AA%E3%83%95%E3%82%A1%E3%83%AC%E3%83%B3%E3%82%B9/wp_get_referer