---
title: "Dockerã§WordPressç’°å¢ƒã‚’æ§‹ç¯‰ã—ã¦ã€ãƒ‡ãƒ¼ã‚¿ã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã™ã‚‹"
emoji: "ğŸŒ¥"
type: "tech" # tech: æŠ€è¡“è¨˜äº‹ / idea: ã‚¢ã‚¤ãƒ‡ã‚¢
topics: ["Docker", "WordPress"]
published: true
---

# ã‚„ã‚ŠãŸã„ã“ã¨
- Dockerã§WordPressç’°å¢ƒã‚’æ§‹ç¯‰
- wp-contentsã¨SQLã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã™ã‚‹

# Dockerã§WordPressç’°å¢ƒã‚’æ§‹ç¯‰

ã¾ãšã¯`docker-compose.yml`ã‚’ä½œæˆã—ã¾ã™ã€‚
ã“ã®ãƒ•ã‚¡ã‚¤ãƒ«ãŒWordPressã‚’èµ·å‹•ã—ã€ãƒ‡ãƒ¼ã‚¿ä¿å­˜ã®ãŸã‚ã®MySQLã‚¤ãƒ³ã‚¹ã‚¿ãƒ³ã‚¹ã‚’ç”Ÿæˆã—ã¾ã™ã€‚

```yml:docker-compose.yml
version: '3'

services:
# ãƒ‡ãƒ¼ã‚¿ãƒ™ãƒ¼ã‚¹
   db:
     image: mysql:5.7
     volumes:
       - db_data:/var/lib/mysql
     restart: always
     environment:
       MYSQL_ROOT_PASSWORD: somewordpress
       MYSQL_DATABASE: wordpress
       MYSQL_USER: wordpress
       MYSQL_PASSWORD: wordpress

# WordPress
   wordpress:
     depends_on:
       - db
     image: wordpress:latest # æœ€æ–°ç‰ˆã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’æŒ‡å®š
     ports:
       - "8000:80"
     restart: always
     environment:
       WORDPRESS_DB_HOST: db:3306
       WORDPRESS_DB_USER: wordpress
       WORDPRESS_DB_PASSWORD: wordpress
volumes:
    db_data:
```

ä»¥ä¸‹ã‚³ãƒãƒ³ãƒ‰ã§ã‚¤ãƒ¡ãƒ¼ã‚¸ã‚’ä½œæˆå®Ÿè¡Œã—ã¾ã™ã€‚
```
% docker-compose up -d
```

# wp-contentsã¨SQLã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã™ã‚‹

ã¨ã€ãƒãƒ¥ãƒ¼ãƒˆãƒªã‚¢ãƒ«ãªã‚“ã‹ã ã¨ä¸Šè¨˜ã®ã‚³ãƒ¼ãƒ‰ã§ç´¹ä»‹ã•ã‚Œã¦ã¾ã™ã€‚
ã¨ã“ã‚ãŒãã®ã¾ã¾ã ã¨å„ç¨®ãƒ‡ãƒ¼ã‚¿ãŒã‚³ãƒ³ãƒ†ãƒŠå†…ã«ç”Ÿæˆã•ã‚Œã‚‹ã®ã§æ‰±ã„ã«ãã„ã§ã™ã€‚

ãã“ã§ã€/wp-contentsã¨SQLã‚’ãƒ­ãƒ¼ã‚«ãƒ«ã«ä¿å­˜ã™ã‚‹ã‚ˆã†ã«ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ã—ã¾ã™ã€‚

```yml:docker-compose.yml
version: '3'

services:
   db:
     image: mysql:5.7
     volumes:
      - ./db/mysql:/var/lib/mysql  # ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š
     ports: # ãƒãƒ¼ãƒˆã‚’æŒ‡å®šã—ã€å¤–éƒ¨ã‹ã‚‰æ¥ç¶šã•ã›ã‚‹
       - "3306:3306"
     restart: always
     environment:
       MYSQL_ROOT_PASSWORD: somewordpress
       MYSQL_DATABASE: wordpress
       MYSQL_USER: wordpress
       MYSQL_PASSWORD: wordpress

   wordpress:
     depends_on:
       - db
     image: wordpress:latest
     volumes:
       - ./html:/var/www/html # ãƒã‚¦ãƒ³ãƒˆã™ã‚‹ãƒ­ãƒ¼ã‚«ãƒ«ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’æŒ‡å®š
     ports:
       - "8000:80"
     restart: always
     environment:
       WORDPRESS_DB_HOST: db:3306
       WORDPRESS_DB_USER: wordpress
       WORDPRESS_DB_PASSWORD: wordpress

# phpmyadminã‚‚ç”¨æ„ã—ã¦SQLã‚’è§¦ã‚Œã‚‹ã‚ˆã†ã«ã—ã¦ã¾ã™
   phpmyadmin:
    image: phpmyadmin/phpmyadmin:latest
    restart: always
    depends_on:
      - db
    ports:
      - 8888:80

volumes:
    db_data:

```

ã“ã‚Œã§/dbã¨/htmlä»¥ä¸‹ã«ãã‚Œãã‚Œä¿å­˜ã•ã‚Œã‚‹ã‚ˆã†ã«ãªã‚Šã¾ã™ï¼ï¼ˆã‚„ã£ãŸãƒ¼ï¼‰

# æœ€å¾Œã«
ï¼¿äººäººäººäººäººäººäººäººäººäººäººäººï¼¿
ï¼ã€€Dockerå®Œå…¨ã«ç†è§£ã—ãŸã€€ï¼œ
ï¿£Y^Y^Y^Y^Y^Y^Y^Y^Y^Y^ï¿£

ã¨ã„ã†ãƒ¬ãƒ™ãƒ«ãªã®ã§ã€å¼•ãç¶šãç²¾é€²ã—ã¾ã™...